{"version":3,"file":"bundle.js","sources":["../src/load_wasm.js","../src/main.js"],"sourcesContent":["var Module = {};\nvar script;\n//to bind arguments in the right order\nfunction bindLastArgs(func, ...boundArgs) {\n  return function(...baseArgs) {\n    return func(...baseArgs, ...boundArgs);\n  }\n}\n\nexport default function loadWASM() {\n  return new Promise((resolve, reject) => {\n    self.fetch('./webdsp_c.wasm')\n      .then(response => response.arrayBuffer())\n      .then(buffer => {\n        Module.wasmBinary = buffer;\n        // GLOBAL -- create custom event for complete glue script execution\n        // Emscripten编译的函数如_grayScale，_malloc等会挂到全局环境下\n        var script = document.createElement('script');\n        script.onload = buildWam;\n        // END GLOBAL\n        script.src = './webdsp_c.js';\n        document.body.appendChild(script);\n\n        // 构建wam模块\n        function buildWam() {\n          console.log('Emscripten boilerplate loaded.');\n          const wam = {};\n\n          // filters\n          wam['grayScale'] = function(pixelData) {\n            // 获取像素数组长度\n            const len = pixelData.length;\n            // 开辟一块内存，返回地址\n            const mem = _malloc(len);\n            // 把像素数据放入这块内存mem\n            HEAPU8.set(pixelData, mem);\n            // 处理像素，源数据\n            _grayScale(mem, len);\n            // 从heap中拿出mem～mem+len（起始指针到位移len的数据）\n            const filtered = HEAPU8.subarray(mem, mem + len);\n            // 释放内存\n            _free(mem);\n            return filtered;\n          };\n          wam['brighten'] = function(pixelData, brightness = 25) {\n            const len = pixelData.length;\n            const mem = _malloc(len);\n            HEAPU8.set(pixelData, mem);\n            _brighten(mem, len, brightness);\n            const filtered = HEAPU8.subarray(mem, mem + len);\n            _free(mem);\n            return filtered;\n          };\n          wam['invert'] = function(pixelData) {\n            const len = pixelData.length;\n            const mem = _malloc(len);\n            HEAPU8.set(pixelData, mem);\n            _invert(mem, len);\n            const filtered = HEAPU8.subarray(mem, mem + len);\n            _free(mem);\n            return filtered;\n          };\n          wam['noise'] = function(pixelData) {\n            const len = pixelData.length;\n            const mem = _malloc(len * Float32Array.BYTES_PER_ELEMENT);\n            HEAPF32.set(pixelData, mem / Float32Array.BYTES_PER_ELEMENT);\n            _noise(mem, len);\n            const filtered = HEAPF32.subarray(mem / Float32Array.BYTES_PER_ELEMENT, mem / Float32Array.BYTES_PER_ELEMENT + len);\n            _free(mem);\n            return filtered;\n          };\n          //MultiFilter Family of Functions\n          wam['multiFilter'] = function(pixelData, width, filterType, mag, multiplier, adj) {\n            const len = pixelData.length;\n            const mem = _malloc(len);\n            HEAPU8.set(pixelData, mem);\n            _multiFilter(mem, len, width, filterType, mag, multiplier, adj);\n            const filtered = HEAPU8.subarray(mem, mem + len);\n            _free(mem);\n            return filtered;\n          };\n          wam['multiFilterFloat'] = function(pixelData, width, filterType, mag, multiplier, adj) {\n            const len = pixelData.length;\n            const mem = _malloc(len * Float32Array.BYTES_PER_ELEMENT);\n            HEAPF32.set(pixelData, mem / Float32Array.BYTES_PER_ELEMENT);\n            _multiFilterFloat(mem, len, width, filterType, mag, multiplier, adj);\n            const filtered = HEAPF32.subarray(mem / Float32Array.BYTES_PER_ELEMENT, mem / Float32Array.BYTES_PER_ELEMENT + len);\n            _free(mem);\n            return filtered;\n          };\n          //bindLastArgs is defined and hoisted from below the module load\n          let mag = 127,\n            mult = 2,\n            adj = 4;\n          let filt = wam['multiFilter'];\n          let filtFloat = wam['multiFilterFloat'];\n          wam['sunset'] = bindLastArgs(filt, 4, mag, mult, adj);\n          wam['analogTV'] = bindLastArgs(filt, 7, mag, mult, adj);\n          wam['emboss'] = bindLastArgs(filt, 1, mag, mult, adj);\n          wam['urple'] = bindLastArgs(filt, 2, mag, mult, adj);\n          wam['forest'] = bindLastArgs(filtFloat, 5, mag, 3, 1);\n          wam['romance'] = bindLastArgs(filtFloat, 8, mag, 3, 2);\n          wam['hippo'] = bindLastArgs(filtFloat, 2, 80, 3, 2);\n          wam['longhorn'] = bindLastArgs(filtFloat, 2, 27, 3, 2);\n          wam['underground'] = bindLastArgs(filt, 8, mag, 1, 4);\n          wam['rooster'] = bindLastArgs(filt, 8, 60, 1, 4);\n          wam['moss'] = bindLastArgs(filtFloat, 1, mag, 1, 1);\n          wam['mist'] = bindLastArgs(filt, 1, mag, 1, 1);\n          wam['kaleidoscope'] = bindLastArgs(filt, 1, 124, 4, 3);\n          wam['tingle'] = bindLastArgs(filtFloat, 1, 124, 4, 3);\n          wam['bacteria'] = bindLastArgs(filt, 4, 0, 2, 4);\n          wam['hulk'] = bindLastArgs(filt, 2, 10, 2, 4);\n          wam['ghost'] = bindLastArgs(filt, 1, 5, 2, 4);\n          wam['swamp'] = bindLastArgs(filtFloat, 1, 40, 2, 3);\n          wam['twisted'] = bindLastArgs(filt, 1, 40, 2, 3);\n          wam['security'] = bindLastArgs(filt, 1, 120, 1, 0);\n          wam['robbery'] = bindLastArgs(filtFloat, 1, 120, 1, 0);\n          //end filters from multiFilter family\n\n          wam['sobelFilter'] = function(pixelData, width, height, invert = false) {\n            const len = pixelData.length;\n            const mem = _malloc(len);\n            HEAPU8.set(pixelData, mem);\n            _sobelFilter(mem, width, height, invert);\n            const filtered = HEAPU8.subarray(mem, mem + len);\n            _free(mem);\n            return filtered;\n          };\n          //convFilter family of filters\n          wam['convFilter'] = function(pixelData, width, height, kernel, divisor, bias = 0, count = 1) {\n            const arLen = pixelData.length;\n            const memData = _malloc(arLen * Float32Array.BYTES_PER_ELEMENT);\n            HEAPF32.set(pixelData, memData / Float32Array.BYTES_PER_ELEMENT);\n            const kerWidth = kernel[0].length;\n            const kerHeight = kernel.length;\n            const kerLen = kerWidth * kerHeight;\n            const flatKernel = kernel.reduce((acc, cur) => acc.concat(cur));\n            const memKernel = _malloc(kerLen * Float32Array.BYTES_PER_ELEMENT);\n            HEAPF32.set(flatKernel, memKernel / Float32Array.BYTES_PER_ELEMENT);\n            _convFilter(memData, width, height, memKernel, 3, 3, divisor, bias, count);\n            const filtered = HEAPF32.subarray(memData / Float32Array.BYTES_PER_ELEMENT, memData / Float32Array.BYTES_PER_ELEMENT + arLen);\n            _free(memData);\n            _free(memKernel);\n            return filtered;\n          }\n          //defining kernel and other parameters before each function definition\n          let kernel = [[1, 1, 1], [1, 1, 1], [1, 1, 1]],\n            divisor = 9,\n            bias = 0,\n            count = 1;\n          let conv = wam['convFilter'];\n          wam['blur'] = bindLastArgs(conv, kernel, divisor, bias, 3);\n          kernel = [[-1, -1, -1], [-1, 8, -1], [-1, -1, -1]], divisor = 1;\n          wam['strongSharpen'] = bindLastArgs(conv, kernel, divisor);\n          kernel = [[0, -1, 0], [-1, 5, -1], [0, -1, 0]], divisor = 2;\n          wam['sharpen'] = bindLastArgs(conv, kernel, divisor);\n          kernel = [[1, -1, -1], [-1, 8, -1], [-1, -1, 1]], divisor = 3;\n          wam['clarity'] = bindLastArgs(conv, kernel, divisor);\n          kernel = [[-1, -1, 1], [-1, 14, -1], [1, -1, -1]], divisor = 3;\n          wam['goodMorning'] = bindLastArgs(conv, kernel, divisor);\n          kernel = [[4, -1, -1], [-1, 4, -1], [0, -1, 4]], divisor = 3;\n          wam['acid'] = bindLastArgs(conv, kernel, divisor);\n          kernel = [[0, 0, -1], [-1, 12, -1], [0, -1, -1]], divisor = 2;\n          wam['dewdrops'] = bindLastArgs(conv, kernel, divisor);\n          kernel = [[-1, -1, 4], [-1, 9, -1], [0, -1, 0]], divisor = 2;\n          wam['destruction'] = bindLastArgs(conv, kernel, divisor);\n          //end convFilter family of filters\n          // for (let prop in wam) {\n          //   wam[prop] = createFilter(returnsOnceMallocedFilter(prop));\n          // }\n          resolve(wam);\n        }\n      });\n  });\n}","import loadWASM from './load_wasm.js';\nvar wam,\n  video,\n  gStream,\n  frameNum,\n  requestId,\n  gFilter;\nvar canvas = document.getElementById('canvas');\nvar context = canvas.getContext('2d');\n\nfunction openWebcam() {\n  navigator.mediaDevices.getUserMedia({\n    video: true\n  }).then((stream) => {\n    gStream = stream; // 保留MediaStream实例\n    video = document.createElement('video');\n    video.autoplay = true;\n    video.srcObject = stream;\n    video.addEventListener(\"loadeddata\", function() {\n      canvas.setAttribute('height', video.videoHeight);\n      canvas.setAttribute('width', video.videoWidth);\n      gFilter = wam.original;\n      draw();\n    });\n  }).catch(function(err) {\n    media = 'video';\n    console.log(err.name);\n  });\n}\nfunction stopWebcam() {\n  gStream.getTracks().forEach(track => track.stop());\n  window.clearInterval(timer);\n  window.cancelAnimationFrame(requestId);\n}\n\nvar lastCalledTime;\nvar fps = 0;\nfunction draw() {\n  if (video.paused) return false;\n\n  // 绘制video当前画面\n  context.drawImage(video, 0, 0);\n  // 获取当前canvas图像像素\n  var pixels = context.getImageData(0, 0, video.videoWidth, video.videoHeight);\n  // 将pixels.data设置为滤镜之后像素值\n  pixels.data.set(gFilter(pixels.data, canvas.width, canvas.height));\n  // 将滤镜处理后pixels放回到canvas画布\n  context.putImageData(pixels, 0, 0);\n  // 继续绘制\n  requestId = requestAnimationFrame(draw);\n\n  // 计算fps\n  if (!lastCalledTime) {\n    lastCalledTime = performance.now();\n    fps = 0;\n    return;\n  }\n  let delta = (performance.now() - lastCalledTime) / 1000;\n  lastCalledTime = performance.now();\n  fps = 1 / delta;\n}\n\nfunction setFilter(evt) {\n  let filter = wam[evt.target.getAttribute('filter')];\n  gFilter = filter || wam.grayScale;\n}\n\nvar frameNumDom = document.getElementById('frameNum');\nfunction showFPS() {\n  frameNumDom.innerHTML = parseInt(fps);\n}\n\n// 加载wasm\nloadWASM().then(module => {\n  wam = module;\n  // 增加原始滤镜模块\n  wam.original = function(pixels) {\n    return pixels;\n  }\n});\n// 加载摄像头图像\ndocument.getElementById('open').addEventListener('click', openWebcam);\ndocument.getElementById('close').addEventListener('click', stopWebcam);\n\nArray.from(document.getElementsByClassName('filter-button')).forEach(function(element) {\n  element.addEventListener('click', setFilter);\n});\n\nvar timer = setInterval(showFPS, 1000);\n\n"],"names":[],"mappings":"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"}